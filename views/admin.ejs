<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Welcome to BITS'22</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link rel="stylesheet" href="./css/form.css">
  </head>
  <body>
    <center><h1>Welcome Moderator, Start by adding and reviewing more tasks?</h1></center><br>
    <center><form id="mainform"class="needs-validation" method="POST" action="/addtask/success">
        <div class="col-md-4">
          <label for="validationCustom01" class="form-label">Task Title</label>
          <input type="text" class="form-control" name="title" id="validationCustom01" placeholder="A Beautiful Task" required>
          <div class="invalid-feedback">
            You must type a title for the task
          </div>
        </div><br>
        <div class="col-md-4">
          <label for="validationCustom01" class="form-label">Small Description</label>
          <input type="text" class="form-control" name="smalldescription" id="validationCustom01" placeholder="A Beautiful small description for the beautiful task" maxlength="100" required>
          <div class="invalid-feedback">
            You must type a small description for your task
          </div>
        </div><br>
        <div class="col-md-4">
          <label for="validationCustom01" class="form-label">Big Description</label>
          <input type="text" class="form-control" name="bigdescription" id="validationCustom01" placeholder="A Beautiful big description for the beautiful task" maxlength="2000" required>
          <div class="invalid-feedback">
            You must type a big description for your task
          </div>
        </div><br>
        <div class="col-md-4">
          <label for="validationCustom01" class="form-label">Task Category</label>
          <input type="text" class="form-control" name="category" id="validationCustom01" placeholder="The category of this task" maxlength="10" required>
          <div class="invalid-feedback">
            You must type the description of your task
          </div>
        </div><br>
        <div class="col-12" style="display: flex; justify-content: center;">
          <button type="submit" class="btn btn-primary">Create</button>
        </div><br>
      </form>
     </center>
     <center><div class="row row-cols-1 row-cols-md-3 g-4">
      <% taskData.forEach(function(data) { %>
        <div class="col">
          <div class="card">
            <div class="card-body">
            <h5 class="card-title"><%= data.task_title %></h5>
            <p class="card-text"><%= data.task_description %></p>
            <p class="card-text">SUBMITTED By: <%= data.username %></p>
            <button type="button" class="btn btn-warning" onclick="openForm3()">View Project Materials</button><br>
            <br><div class="pop-up3" id="myForm3">
              <div class="card">
                <div class="card-body">
                  Material URL - <b><%= data.project_url %></b><br>
                  Extra Information - <b><%= data.feedback %></b><br>
                  <button type="button" class="btn cancel" onclick="closeForm3()">Close</button>
                </div>
              </div>
            </div><br>
              <button type="button" class="btn btn-primary" onclick="openForm2()">Approve Task</button><br>
              <div class="pop-up2" id="myForm2">
                <form action="/admin/task/approve/<%= data.task_id %>/<%= data.userid %>" method="POST"><br>
                  <div class="mb-3">
                    <label for="exampleInputEmail1" class="form-label">Points for the task</label>
                    <input type="number" class="form-control" name="points" id="exampleInputEmail1" aria-describedby="emailHelp">
                    <div id="emailHelp" class="form-text">Please type how many points you want to give to this task</div>
                  </div>
                  <button type="submit" class="btn btn-primary">Submit</button>
                  <button type="button" class="btn cancel" onclick="closeForm2()">Close</button>
                </form>
              </div><br>
              <button type="button" class="btn btn-danger" onclick="openForm()">Decline Task</button>
            <div class="pop-up" id="myForm">
              <form action="/admin/task/decline/<%= data.task_id %>/<%= data.userid %>" method="POST"><br>
                <div class="mb-3">
                  <label for="exampleInputEmail1" class="form-label">Reason for Denial</label>
                  <input type="text" class="form-control" name="denialreason" id="exampleInputEmail1" aria-describedby="emailHelp">
                  <div id="emailHelp" class="form-text">Please type your reason for the task denial</div>
                </div>
                <button type="submit" class="btn btn-primary">Submit</button>
                <button type="button" class="btn cancel" onclick="closeForm()">Close</button>
              </form>
            </div>
            </div>
          </div>
          </div>
      <% }) %>
      </center>
    </div>
    <script>
      function openForm() {
        document.getElementById("myForm").style.display = "block";
      }
      
      function closeForm() {
        document.getElementById("myForm").style.display = "none";
      }

      function openForm2() {
        document.getElementById("myForm2").style.display = "block";
      }
      
      function closeForm2() {
        document.getElementById("myForm2").style.display = "none";
      }

      function openForm3() {
        document.getElementById("myForm3").style.display = "block";
      }
      
      function closeForm3() {
        document.getElementById("myForm3").style.display = "none";
      }
      </script>
      
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
  </body>
</html>